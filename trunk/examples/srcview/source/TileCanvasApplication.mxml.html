<!-- saved from url=(0014)about:internet -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>TileCanvasApplication.mxml</title>
<link rel="stylesheet" type="text/css" href="../SourceStyles.css"/>
</head>

<body><pre><span class="mxmlCdata">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="mxmlComponent">&lt;mx:Application</span> 
    layout=&quot;<span class="mxmlString">absolute</span>&quot;
    
    viewSourceURL=&quot;<span class="mxmlString">srcview/index.html</span>&quot;
    
    xmlns:mx=&quot;<span class="mxmlString">http://www.adobe.com/2006/mxml</span>&quot;
    xmlns:containers=&quot;<span class="mxmlString">com.jwopitz.containers.*</span>&quot;<span class="mxmlComponent">&gt;</span>

    <span class="mxmlTag">&lt;mx:Script&gt;</span>
        <span class="asOperator">&lt;!</span><span class="asBracket">[</span>CDATA<span class="asBracket">[</span>
            <span class="asReserved">import</span> mx.controls.Alert;
            <span class="asReserved">import</span> mx.core.Container;
            <span class="asReserved">import</span> mx.collections.SortField;
            <span class="asReserved">import</span> mx.events.CollectionEventKind;
            <span class="asReserved">import</span> mx.collections.Sort;
            <span class="asReserved">import</span> mx.events.EffectEvent;
            <span class="asReserved">import</span> mx.events.CollectionEvent;
            <span class="asReserved">import</span> mx.collections.ArrayCollection;
            <span class="asReserved">import</span> com.jwopitz.containers.QuoteDetailCard;
            <span class="asReserved">import</span> com.jwopitz.vo.QuoteVO
            <span class="asReserved">import</span> mx.effects.Move;
            <span class="asReserved">import</span> mx.containers.Box;
            
            <span class="asBracket">[</span><span class="asMetadata">Bindable</span><span class="asBracket">]</span><span class="asReserved">private</span> <span class="asVar">var</span> columns<span class="asOperator">:</span>int <span class="asOperator">=</span> 3;
            <span class="asBracket">[</span><span class="asMetadata">Bindable</span><span class="asBracket">]</span><span class="asReserved">private</span> <span class="asVar">var</span> columnWidth<span class="asOperator">:</span>Number <span class="asOperator">=</span> 150;
            <span class="asBracket">[</span><span class="asMetadata">Bindable</span><span class="asBracket">]</span><span class="asReserved">private</span> <span class="asVar">var</span> columnGap<span class="asOperator">:</span>Number <span class="asOperator">=</span> 5;
            
            <span class="asBracket">[</span><span class="asMetadata">Bindable</span><span class="asBracket">]</span><span class="asReserved">private</span> <span class="asVar">var</span> rows<span class="asOperator">:</span>int <span class="asOperator">=</span> 0;
            <span class="asBracket">[</span><span class="asMetadata">Bindable</span><span class="asBracket">]</span><span class="asReserved">private</span> <span class="asVar">var</span> rowHeight<span class="asOperator">:</span>Number <span class="asOperator">=</span> 100;
            <span class="asBracket">[</span><span class="asMetadata">Bindable</span><span class="asBracket">]</span><span class="asReserved">private</span> <span class="asVar">var</span> rowGap<span class="asOperator">:</span>Number <span class="asOperator">=</span> 5;
            
            <span class="asReserved">private</span> <span class="asVar">var</span> thumbs<span class="asOperator">:</span>Array;
            
            <span class="asBracket">[</span><span class="asMetadata">Bindable</span><span class="asBracket">]</span><span class="asReserved">private</span> <span class="asVar">var</span> isMoving<span class="asOperator">:</span>Boolean <span class="asOperator">=</span> <span class="asReserved">false</span>;
            
            <span class="asBracket">[</span><span class="asMetadata">Bindable</span><span class="asBracket">]</span>
            <span class="asReserved">private</span> <span class="asVar">var</span> order<span class="asOperator">:</span>Boolean <span class="asOperator">=</span> <span class="asReserved">false</span>;
            
            <span class="asBracket">[</span><span class="asMetadata">Bindable</span><span class="asBracket">]</span>
            <span class="asReserved">private</span> <span class="asVar">var</span>  d<span class="asOperator">:</span>ArrayCollection <span class="asOperator">=</span> <span class="asReserved">new</span> ArrayCollection<span class="asBracket">(</span>
                                    <span class="asBracket">[</span><span class="asReserved">new</span> QuoteVO<span class="asBracket">(</span><span class="asString">&apos;GOOG&apos;</span>, <span class="asString">&apos;Google&apos;</span>, 145.12, 0.35, 0.02<span class="asBracket">)</span>,
                                     <span class="asReserved">new</span> QuoteVO<span class="asBracket">(</span><span class="asString">&apos;IBM&apos;</span>, <span class="asString">&apos;IBM&apos;</span>, 45.78, <span class="asOperator">-</span>0.15, <span class="asOperator">-</span>0.01<span class="asBracket">)</span>,
                                     <span class="asReserved">new</span> QuoteVO<span class="asBracket">(</span><span class="asString">&apos;AAPL&apos;</span>, <span class="asString">&apos;Apple&apos;</span>, 103.01, <span class="asOperator">-</span>0.02, <span class="asOperator">-</span>0.01<span class="asBracket">)</span>,
                                     <span class="asReserved">new</span> QuoteVO<span class="asBracket">(</span><span class="asString">&apos;POPN&apos;</span>, <span class="asString">&apos;Pop N Fresh&apos;</span>, 12.14, 0.12, 0.07<span class="asBracket">)</span>,
                                     <span class="asBracket">])</span><span class="asComment">/*new QuoteVO(&apos;IBM&apos;, &apos;IBM&apos;, 45, 0.35, 0.02),
                                     new QuoteVO(&apos;AAPL&apos;, &apos;Apple&apos;, 103, 0.35, 0.02),
                                     new QuoteVO(&apos;POPN&apos;, &apos;Pop N Fresh&apos;, 1214, 0.35, 0.02),
                                     new QuoteVO(&apos;GOOG&apos;, &apos;Google&apos;, 145, 0.35, 0.02),
                                     new QuoteVO(&apos;IBM&apos;, &apos;IBM&apos;, 45, 0.35, 0.02),
                                     new QuoteVO(&apos;AAPL&apos;, &apos;Apple&apos;, 103, 0.35, 0.02),
                                     new QuoteVO(&apos;POPN&apos;, &apos;Pop N Fresh&apos;, 1214, 0.35, 0.02),]
                                    );*/</span>
                                    
            <span class="asReserved">private</span> <span class="asFunction">function</span> sort <span class="asBracket">(</span>property<span class="asOperator">:</span>String<span class="asBracket">)</span><span class="asOperator">:</span><span class="asReserved">void</span> <span class="asBracket">{</span>
                
                <span class="asVar">var</span> s<span class="asOperator">:</span>Sort <span class="asOperator">=</span> <span class="asReserved">new</span> Sort<span class="asBracket">()</span>;
                s.fields <span class="asOperator">=</span> <span class="asBracket">[</span><span class="asReserved">new</span> SortField<span class="asBracket">(</span>property, <span class="asReserved">false</span>, order<span class="asBracket">)]</span>;
                d.sort <span class="asOperator">=</span> s;
                d.refresh<span class="asBracket">()</span>;
            <span class="asBracket">}</span>
                        
            <span class="asReserved">private</span> <span class="asFunction">function</span> setupRenderer <span class="asBracket">(</span>h<span class="asOperator">:</span>Boolean <span class="asOperator">=</span> <span class="asReserved">false</span><span class="asBracket">)</span><span class="asOperator">:</span>ClassFactory <span class="asBracket">{</span>
                <span class="asVar">var</span> cf<span class="asOperator">:</span>ClassFactory <span class="asOperator">=</span> <span class="asReserved">new</span> ClassFactory<span class="asBracket">(</span>QuoteDetailCard<span class="asBracket">)</span>;
                <span class="asReserved">if</span> <span class="asBracket">(</span>h<span class="asBracket">){</span>
                    cf.properties <span class="asOperator">=</span> <span class="asBracket">{</span>currentState<span class="asOperator">:</span><span class="asString">&apos;horizontalLayout&apos;</span><span class="asBracket">}</span>;
                <span class="asBracket">}</span>
                <span class="asReserved">return</span> cf;
            <span class="asBracket">}</span>
            
            <span class="asReserved">private</span> <span class="asFunction">function</span> tcCreationComplete <span class="asBracket">()</span><span class="asOperator">:</span><span class="asReserved">void</span> <span class="asBracket">{</span>
                tc.direction <span class="asOperator">=</span> <span class="asString">&apos;vertical&apos;</span>;
                tc.itemSpawnPoint <span class="asOperator">=</span> <span class="asReserved">new</span> Point<span class="asBracket">(</span>tc.width <span class="asOperator">-</span> tc.columnWidth, tc.height <span class="asOperator">-</span> tc.rowHeight<span class="asBracket">)</span>;
                tc.dataProvider <span class="asOperator">=</span> d;
            <span class="asBracket">}</span>
                                                    
        <span class="asBracket">]]</span><span class="asOperator">&gt;</span>
    <span class="mxmlTag">&lt;/mx:Script&gt;</span>
    
    <span class="mxmlComponent">&lt;mx:Panel</span> title=&quot;<span class="mxmlString">TileCanvas by jwopitz - updated {</span><span class="asReserved">new</span> Date<span class="asBracket">()</span><span class="mxmlString">}</span>&quot; 
        width=&quot;<span class="mxmlString">98%</span>&quot; height=&quot;<span class="mxmlString">98%</span>&quot; 
        paddingLeft=&quot;<span class="mxmlString">5</span>&quot; paddingRight=&quot;<span class="mxmlString">5</span>&quot; paddingBottom=&quot;<span class="mxmlString">5</span>&quot; paddingTop=&quot;<span class="mxmlString">5</span>&quot;<span class="mxmlComponent">&gt;</span>
        
        <span class="mxmlComponent">&lt;mx:HBox&gt;</span>
            <span class="mxmlComponent">&lt;mx:VBox&gt;</span>
                <span class="mxmlComponent">&lt;mx:Label</span> text=&quot;<span class="mxmlString">{</span><span class="asString">&apos;actual columns: &apos;</span> <span class="asOperator">+</span> tc.columns<span class="mxmlString">}</span>&quot;<span class="mxmlComponent">/&gt;</span>
                <span class="mxmlComponent">&lt;mx:HBox&gt;</span>
                    <span class="mxmlComponent">&lt;mx:Label</span> text=&quot;<span class="mxmlString">columns</span>&quot;<span class="mxmlComponent">/&gt;</span>
                    <span class="mxmlComponent">&lt;mx:NumericStepper</span> id=&quot;<span class="mxmlString">col_nm</span>&quot; minimum=&quot;<span class="mxmlString">1</span>&quot; maximum=&quot;<span class="mxmlString">10</span>&quot; value=&quot;<span class="mxmlString">3</span>&quot;<span class="mxmlComponent">/&gt;</span>
                <span class="mxmlComponent">&lt;/mx:HBox&gt;</span>
            <span class="mxmlComponent">&lt;/mx:VBox&gt;</span>
            
            <span class="mxmlComponent">&lt;mx:VBox&gt;</span>
                <span class="mxmlComponent">&lt;mx:Label</span> text=&quot;<span class="mxmlString">{</span><span class="asString">&apos;actual rows: &apos;</span> <span class="asOperator">+</span> tc.rows<span class="mxmlString">}</span>&quot;<span class="mxmlComponent">/&gt;</span>
                <span class="mxmlComponent">&lt;mx:HBox&gt;</span>
                    <span class="mxmlComponent">&lt;mx:Label</span> text=&quot;<span class="mxmlString">rows</span>&quot;<span class="mxmlComponent">/&gt;</span>
                    <span class="mxmlComponent">&lt;mx:NumericStepper</span> id=&quot;<span class="mxmlString">row_nm</span>&quot; minimum=&quot;<span class="mxmlString">1</span>&quot; maximum=&quot;<span class="mxmlString">10</span>&quot; value=&quot;<span class="mxmlString">3</span>&quot;<span class="mxmlComponent">/&gt;</span>
                <span class="mxmlComponent">&lt;/mx:HBox&gt;</span>
            <span class="mxmlComponent">&lt;/mx:VBox&gt;</span>    
            
            <span class="mxmlComponent">&lt;mx:VBox&gt;</span>
                <span class="mxmlComponent">&lt;mx:Label</span> text=&quot;<span class="mxmlString">current direction {</span>tc.direction<span class="mxmlString">}</span>&quot;<span class="mxmlComponent">/&gt;</span>
                <span class="mxmlComponent">&lt;mx:Button</span> label=&quot;<span class="mxmlString">change direction</span>&quot;
                click=&quot;<span class="asBracket">(</span>tc.direction <span class="asOperator">==</span> <span class="asString">&apos;horizontal&apos;</span><span class="asBracket">)</span><span class="asOperator">?</span> tc.direction <span class="asOperator">=</span> <span class="asString">&apos;vertical&apos;</span><span class="asOperator">:</span> tc.direction <span class="asOperator">=</span> <span class="asString">&apos;horizontal&apos;</span>;&quot;<span class="mxmlComponent">/&gt;</span>
            <span class="mxmlComponent">&lt;/mx:VBox&gt;</span>
            
            <span class="mxmlComponent">&lt;mx:Button</span> label=&quot;<span class="mxmlString">add cell</span>&quot; 
                click=&quot;d.addItem<span class="asBracket">(</span><span class="asReserved">new</span> QuoteVO<span class="asBracket">(</span><span class="asString">&apos;YHOO&apos;</span>, <span class="asString">&apos;Yahoo Inc.&apos;</span>, 15.76, <span class="asOperator">-</span>.02, <span class="asOperator">-</span>.00<span class="asBracket">))</span>;&quot;<span class="mxmlComponent">/&gt;</span>
                
            <span class="mxmlComponent">&lt;mx:Button</span> label=&quot;<span class="mxmlString">delete cell</span>&quot; 
                click=&quot;d.removeItemAt<span class="asBracket">(</span>d.length <span class="asOperator">-</span> 1<span class="asBracket">)</span>;&quot;<span class="mxmlComponent">/&gt;</span>
            
            <span class="mxmlComponent">&lt;mx:Spacer</span> width=&quot;<span class="mxmlString">25</span>&quot;<span class="mxmlComponent">/&gt;</span>
            
            <span class="mxmlComponent">&lt;mx:Button</span> width=&quot;<span class="mxmlString">125</span>&quot; label=&quot;<span class="mxmlString">{</span><span class="asBracket">(</span>order<span class="asBracket">)</span> <span class="asOperator">?</span> <span class="asString">&apos;sort descending&apos;</span> <span class="asOperator">:</span> <span class="asString">&apos;sort ascending&apos;</span><span class="mxmlString">}</span>&quot; 
                click=&quot;order <span class="asOperator">=</span> <span class="asOperator">!</span>order; sort<span class="asBracket">(</span>sorts_rbg.selectedValue <span class="asReserved">as</span> String<span class="asBracket">)</span>;&quot;<span class="mxmlComponent">/&gt;</span>
            
            <span class="mxmlComponent">&lt;mx:RadioButtonGroup</span> id=&quot;<span class="mxmlString">sorts_rbg</span>&quot; change=&quot;sort<span class="asBracket">(</span>sorts_rbg.selectedValue <span class="asReserved">as</span> String<span class="asBracket">)</span>;&quot;<span class="mxmlComponent">/&gt;</span>
            <span class="mxmlComponent">&lt;mx:RadioButton</span> group=&quot;<span class="mxmlString">{</span>sorts_rbg<span class="mxmlString">}</span>&quot; label=&quot;<span class="mxmlString">symbol</span>&quot; value=&quot;<span class="mxmlString">symbol</span>&quot; selected=&quot;<span class="mxmlString">true</span>&quot;<span class="mxmlComponent">/&gt;</span>    
            <span class="mxmlComponent">&lt;mx:RadioButton</span> group=&quot;<span class="mxmlString">{</span>sorts_rbg<span class="mxmlString">}</span>&quot; label=&quot;<span class="mxmlString">value</span>&quot; value=&quot;<span class="mxmlString">value</span>&quot;<span class="mxmlComponent">/&gt;</span>    
            <span class="mxmlComponent">&lt;mx:RadioButton</span> group=&quot;<span class="mxmlString">{</span>sorts_rbg<span class="mxmlString">}</span>&quot; label=&quot;<span class="mxmlString">change</span>&quot; value=&quot;<span class="mxmlString">change</span>&quot;<span class="mxmlComponent">/&gt;</span>
            <span class="mxmlComponent">&lt;mx:RadioButton</span> group=&quot;<span class="mxmlString">{</span>sorts_rbg<span class="mxmlString">}</span>&quot; label=&quot;<span class="mxmlString">% change</span>&quot; value=&quot;<span class="mxmlString">percentChange</span>&quot;<span class="mxmlComponent">/&gt;</span>        
                
            
            
        <span class="mxmlComponent">&lt;/mx:HBox&gt;</span>
        
        <span class="mxmlComponent">&lt;mx:HBox</span> width=&quot;<span class="mxmlString">100%</span>&quot; height=&quot;<span class="mxmlString">100%</span>&quot;<span class="mxmlComponent">&gt;</span>
            <span class="mxmlComponent">&lt;containers:TileCanvas</span> id=&quot;<span class="mxmlString">tc</span>&quot; width=&quot;<span class="mxmlString">100%</span>&quot; height=&quot;<span class="mxmlString">100%</span>&quot; 
                itemSpawnPoint=&quot;<span class="mxmlString">{</span><span class="asReserved">new</span> Point<span class="asBracket">(</span>tc.width <span class="asOperator">-</span> tc.columnWidth, tc.height <span class="asOperator">-</span> tc.rowHeight<span class="asBracket">)</span><span class="mxmlString">}</span>&quot; 
                columns=&quot;<span class="mxmlString">{</span>col_nm.value<span class="mxmlString">}</span>&quot; columnWidth=&quot;<span class="mxmlString">{</span>columnWidth<span class="mxmlString">}</span>&quot; 
                rows=&quot;<span class="mxmlString">{</span>row_nm.value<span class="mxmlString">}</span>&quot; rowHeight=&quot;<span class="mxmlString">{</span>rowHeight<span class="mxmlString">}</span>&quot; dragEnabled=&quot;<span class="mxmlString">true</span>&quot; dropEnabled=&quot;<span class="mxmlString">true</span>&quot;
                itemRenderer=&quot;<span class="mxmlString">{</span>setupRenderer<span class="asBracket">()</span><span class="mxmlString">}</span>&quot; creationComplete=&quot;tcCreationComplete<span class="asBracket">()</span>&quot; backgroundColor=&quot;<span class="mxmlString">white</span>&quot;<span class="mxmlComponent">/&gt;</span>
                
            <span class="mxmlComponent">&lt;mx:List</span> width=&quot;<span class="mxmlString">300</span>&quot; itemRenderer=&quot;<span class="mxmlString">{</span>setupRenderer<span class="asBracket">(</span><span class="asReserved">true</span><span class="asBracket">)</span><span class="mxmlString">}</span>&quot; rowHeight=&quot;<span class="mxmlString">55</span>&quot; height=&quot;<span class="mxmlString">100%</span>&quot;
                dataProvider=&quot;<span class="mxmlString">{</span>d<span class="mxmlString">}</span>&quot;<span class="mxmlComponent">/&gt;</span>
        <span class="mxmlComponent">&lt;/mx:HBox&gt;</span>
            
        
        
    <span class="mxmlComponent">&lt;/mx:Panel&gt;</span>
    
<span class="mxmlComponent">&lt;/mx:Application&gt;</span></pre></body>
</html>
